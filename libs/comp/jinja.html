<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>yx - libs/comp/jinja</title>
        <link rel="stylesheet" href="/_static/index.css">
        <link rel="stylesheet" href="/_static/pygments.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css" integrity="sha384-5TcZemv2l/9On385z///+d7MSYlvIEw9FuZTIdZ14vJLqWphw7e7ZPuOiCHJcFCP" crossorigin="anonymous">
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js" integrity="sha384-cMkvdD8LoxVzGF/RPUKAcvmm49FQ0oxwDF3BGKtDXcEc+T1b2N+teh/OJfpU0jr6" crossorigin="anonymous"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js" integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh" crossorigin="anonymous"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                renderMathInElement(document.body, {
                  delimiters: [
                      {left: ':::tex', right: ':::', display: true},
                      {left: ':tex', right: ':', display: false},
                  ],
                  throwOnError : false
                });
            });
        </script>
    </head>     
    <body>
        <header class="header">
            <div class="menu-div">
                
                    <a href="/" class="menu-item">home</a>
                
                    <a href="/about" class="menu-item">about</a>
                
                    <a href="/education" class="menu-item">education</a>
                
                    <a href="/research" class="menu-item">research</a>
                
                    <a href="/publications" class="menu-item">publications</a>
                
                    <a href="/work" class="menu-item">work</a>
                
                    <a href="/setup" class="menu-item">setup</a>
                
                    <a href="/libs" class="menu-item ">libs</a>
                
                    <a href="/notes" class="menu-item ">notes</a>
                
            </div>    
        </header>
        <div class="content">
            
            
            <div class="sidebar">
                <span class="sidebar-title">libs menu</span>
                <ul class="sidebar-ul">
                    
                        
    
    

    
        <li class="sidebar-collapsible">
            <details open>
                <summary>
                  <span></span>
                  
                      <a href="/libs/typed">typed</a>
                  
                </summary>
                <ul class="sidebar-ul-inner-1">
                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/overview">overview</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/types">types</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/models">models</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/errors">errors</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/examples">examples</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/entities">lists of entities</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/glossary">glossary</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">└─</span>
            
                <a href="/libs/typed/changelog">changelog</a>
            
            
        </li>
    

                    
                </ul>
            </details>
        </li>
    

                    
                        
    
    

    
        <li class="sidebar-collapsible">
            <details open>
                <summary>
                  <span></span>
                  
                      <a href="/libs/comp">comp</a>
                  
                </summary>
                <ul class="sidebar-ul-inner-1">
                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/overview">overview</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/jinja">jinja</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/components">components</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/models">models</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/rendering">rendering</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/statics">statics</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/compatibility">compatibility</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/entities">list of entities</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/glossary">glossary</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">└─</span>
            
                <a href="/libs/comp/changelog">changelog</a>
            
            
        </li>
    

                    
                </ul>
            </details>
        </li>
    

                    
                        
    
    

    
        <li class="sidebar-li-0">
            <span></span>
              
                  <a href="/libs/cli">cli</a>
               
        </li>
    

                    
                        
    
    

    
        <li class="sidebar-li-0">
            <span></span>
              
                  <a href="/libs/utils">utils</a>
               
        </li>
    

                    
                </ul>
            </div>
            
            
            <div class="main">
                
                    


<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
    
    
        
            
            <li class="breadcrumb-item">
                <a href="/libs">libs</a>
            </li>
        
    
        
            
            <li class="breadcrumb-item">
                <span class="breadcrumb-separator">/</span><a href="/libs/comp">comp</a>
            </li>
        
    
        
            <li class="breadcrumb-item active" aria-current="page">
                <span class="breadcrumb-separator">/</span><a href="/libs/comp/jinja">jinja</a>
            </li>
        
    
    </ol>
</nav>

                
                
                <main><section id="about">
<h1>About<a class="headerlink" href="#about" title="Link to this heading"></a></h1>
<p>In the following we discuss  <em>jinja strings</em>, which are the return entity of an entity in <a class="autolink autolink-libs reference external" href="/libs/comp">comp</a> component system.</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#jinja-strings">Jinja Strings</a></p></li>
<li><p><a class="reference internal" href="#delimiters">Delimiters</a></p></li>
<li><p><a class="reference internal" href="#variables">Variables</a></p></li>
<li><p><a class="reference internal" href="#rendering">Rendering</a></p></li>
<li><p><a class="reference internal" href="#factories">Factories</a></p></li>
<li><p><a class="reference internal" href="#highlight">Highlight</a></p></li>
<li><p><a class="reference internal" href="#other-docs">Other Docs</a></p></li>
</ol>
</section>
<section id="jinja-strings">
<h1>Jinja Strings<a class="headerlink" href="#jinja-strings" title="Link to this heading"></a></h1>
<p>The component system of <a class="autolink autolink-libs reference external" href="/libs/comp">comp</a> is based in <a class="autolink autolink-global reference external" href="https://jinja.palletsprojects.com/en/stable/">jinja2</a>. This means that the <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#component">components</a> construct strings following <a class="autolink autolink-global reference external" href="https://jinja.palletsprojects.com/en/stable/">jinja2</a> syntax. We have a specific type <code class="docutils literal notranslate"><span class="pre">Jinja</span></code> (which is a subtype of <code class="docutils literal notranslate"><span class="pre">Str</span></code> - the string <a class="autolink autolink-libs reference external" href="/libs/typed/glossary#type">type</a> of <a class="autolink autolink-libs reference external" href="/libs/typed">typed</a>) whose instances are the so-called <em>jinja strings</em>. These are Python <a class="autolink autolink-python reference external" href="https://docs.python.org/3/reference/datamodel.html#immutable-sequences">strings</a> preppended with the “<code class="docutils literal notranslate"><span class="pre">jinja</span></code>” keyword.</p>
<p>So, more precisely, an instance of <code class="docutils literal notranslate"><span class="pre">Jinja</span></code> is a string as follows (see <a class="autolink autolink-global reference external" href="https://jinja.palletsprojects.com/en/stable/">jinja2</a> to discover the full valid syntax):</p>
<div class="highlight-python notranslate" id="jinja-string"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">my_jinja_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;jinja</span>
<span class="linenos"> 2</span><span class="s2">[</span><span class="si">% f</span><span class="s2">or i in x %]</span>
<span class="linenos"> 3</span><span class="s2">&lt;some html&gt;</span>
<span class="linenos"> 4</span><span class="s2">    [</span><span class="si">% i</span><span class="s2">f y is True %]</span>
<span class="linenos"> 5</span><span class="s2">    [</span><span class="si">% s</span><span class="s2">et w = &quot;something&quot; %]</span>
<span class="linenos"> 6</span><span class="s2">    &lt;more html&gt;</span>
<span class="linenos"> 7</span><span class="s2">    ...</span>
<span class="linenos"> 8</span><span class="s2">[# my beautiful comment #]</span>
<span class="linenos"> 9</span><span class="s2">    [[ z ]]</span>
<span class="linenos">10</span><span class="s2">    ...</span>
<span class="linenos">11</span><span class="s2">    &lt;/more html&gt;</span>
<span class="linenos">12</span><span class="s2">    [</span><span class="si">% e</span><span class="s2">ndif %]</span>
<span class="linenos">13</span><span class="s2">&lt;/some html&gt;</span>
<span class="linenos">14</span><span class="s2">[</span><span class="si">% e</span><span class="s2">ndfor %]</span>
<span class="linenos">15</span><span class="s2">&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="delimiters">
<h1>Delimiters<a class="headerlink" href="#delimiters" title="Link to this heading"></a></h1>
<p>You should note that the <a class="autolink autolink-global reference external" href="https://jinja.palletsprojects.com/en/stable/">jinja2</a> code provided in the <a class="reference internal" href="#jinja-string">previous</a> <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#jinja-strings">jinja string</a> uses delimiters differing from the standard ones: while {l:jinja} uses <code class="docutils literal notranslate"><span class="pre">{%</span></code>, <code class="docutils literal notranslate"><span class="pre">{{</span></code> and <code class="docutils literal notranslate"><span class="pre">{#</span></code> as default for blocks, variables and comments, respectively, we are using <code class="docutils literal notranslate"><span class="pre">[</span></code>, <code class="docutils literal notranslate"><span class="pre">[[</span></code> and <code class="docutils literal notranslate"><span class="pre">[#</span></code>.</p>
<p>The reason is that as we will see in <a class="reference internal" href="components"><span class="doc std std-doc">components</span></a> documentation, in <a class="autolink autolink-libs reference external" href="/libs/comp">comp</a> the <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#jinja-strings">jinja strings</a> are typically returned by functions, and one would like to use variables of the function inside the return jinja string. This implies to consider the jinja strings as <a class="autolink autolink-python reference external" href="https://docs.python.org/3/reference/lexical_analysis.html#f-strings">f-strings</a>. But in f-strings, variables already use <code class="docutils literal notranslate"><span class="pre">{</span></code> as delimiters, causing certain conflict with the default {l:jinja} delimiters.</p>
<p>If you don’t like using <code class="docutils literal notranslate"><span class="pre">[</span></code> as the basic delimiter for <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#jinja-strings">jinja strings</a>, you can set one of the following options, or some mix of them:</p>
<div class="captioned-table" id="table-1">
<table class="custom-pre-table docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>blocks</p></th>
<th class="head"><p>variables</p></th>
<th class="head"><p>comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[% … %]</p></td>
<td><p>[[ … ]]</p></td>
<td><p>[# … #]</p></td>
</tr>
<tr class="row-odd"><td><p>(% … %)</p></td>
<td><p>(( … ))</p></td>
<td><p>(# … #)</p></td>
</tr>
<tr class="row-even"><td><p>&lt;% … %&gt;</p></td>
<td><p>&lt;&lt; … &gt;&gt;</p></td>
<td><p>&lt;# … #&gt;</p></td>
</tr>
</tbody>
</table>
<p><a class="table-caption reference external" href="#table-1">table 1: jinja delimiters</a></p>
</div>
<p>This is done by setting the following environment variables:</p>
<div class="captioned-table" id="table-2">
<table class="custom-pre-table docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>env</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>default value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>COMP_JINJA_VAR_DELIM</p></td>
<td><p>delimiters for jinja vars</p></td>
<td><p>(“[[”, “]]”)</p></td>
</tr>
<tr class="row-odd"><td><p>COMP_JINJA_BLOCK_DELIM</p></td>
<td><p>delimiters for jinja blocks</p></td>
<td><p>(“[%”, “%]”)</p></td>
</tr>
<tr class="row-even"><td><p>COMP_JINJA_COMMENT_DELIM</p></td>
<td><p>delimiters for jinja comments</p></td>
<td><p>(“[#”, “#]”)</p></td>
</tr>
</tbody>
</table>
<p><a class="table-caption reference external" href="#table-2">table 2: jinja delimiters envs</a></p>
</div>
</section>
<section id="variables">
<h1>Variables<a class="headerlink" href="#variables" title="Link to this heading"></a></h1>
<p>When working with <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#jinja-strings">jinja strings</a> we have two kinds of variables:</p>
<ol class="arabic simple">
<li><p><em>inner jinja variables</em>, which are defined as part of the jinja string through a <code class="docutils literal notranslate"><span class="pre">[%</span> <span class="pre">set</span> <span class="pre">...</span> <span class="pre">%]</span></code> block;</p></li>
<li><p><em>free jinja variables</em>, which are not defined inside the jinja string.</p></li>
</ol>
<p>So, for example, in the <a class="reference internal" href="#jinja-string">above</a> jinja string, <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> and <code class="docutils literal notranslate"><span class="pre">z</span></code> are all <em>free jinja variables</em>, while <code class="docutils literal notranslate"><span class="pre">w</span></code> is an <em>inner jinja var</em>.</p>
<p>The variables of a <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#jinja-strings">jinja string</a> are accessible as <a class="autolink autolink-python reference external" href="https://docs.python.org/3/glossary.html#term-attribute">attributes</a> corresponding to <a class="autolink autolink-python reference external" href="https://docs.python.org/3/library/functions.html#property">properties</a> of the type <code class="docutils literal notranslate"><span class="pre">Jinja</span></code>:</p>
<div class="captioned-table" id="table-3">
<table class="custom-pre-table docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>attribute</p></th>
<th class="head"><p>meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>.vars</p></td>
<td><p>dictionary with all vars organized by kind</p></td>
</tr>
<tr class="row-odd"><td><p>.inner_vars</p></td>
<td><p>dict of inner vars and values of the jinja string</p></td>
</tr>
<tr class="row-even"><td><p>.free_vars</p></td>
<td><p>tuple of free vars of the jinja string</p></td>
</tr>
</tbody>
</table>
<p><a class="table-caption reference external" href="#table-3">table 3</a></p>
</div>
<p>In the case of the <a class="reference internal" href="#jinja-string">above</a> jinja string one would get:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">comp</span><span class="w"> </span><span class="kn">import</span> <span class="n">Jinja</span>
<span class="linenos">2</span><span class="kn">from</span><span class="w"> </span><span class="nn">some.where</span><span class="w"> </span><span class="kn">import</span> <span class="n">my_jinja_string</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="n">Jinja</span><span class="p">(</span><span class="n">my_jinja_string</span><span class="p">)</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>        <span class="c1"># {&quot;inner&quot;: {&quot;w&quot;: &quot;something&quot;}, &quot;free&quot;: (&quot;x&quot;, &quot;y&quot;, z&quot;)}</span>
<span class="linenos">5</span><span class="nb">print</span><span class="p">(</span><span class="n">Jinja</span><span class="p">(</span><span class="n">my_jinja_string</span><span class="p">)</span><span class="o">.</span><span class="n">inner_vars</span><span class="p">)</span>  <span class="c1"># {&quot;w&quot;: &quot;something&quot;}</span>
<span class="linenos">6</span><span class="nb">print</span><span class="p">(</span><span class="n">Jinja</span><span class="p">(</span><span class="n">my_jinja_string</span><span class="p">)</span><span class="o">.</span><span class="n">free_vars</span><span class="p">)</span>   <span class="c1"># (&quot;x&quot;, &quot;y&quot;, &quot;z&quot;)</span>
</pre></div>
</div>
<p>Notice that the attributes are accessible only after initialization of the jinja strings in the <code class="docutils literal notranslate"><span class="pre">Jinja</span></code> type. However, following the {l:functions over methods} philosophy of <a class="autolink autolink-libs reference external" href="/libs/typed">typed</a>, the properties above are actually defined through <a class="autolink autolink-libs reference external" href="/libs/typed/glossary#typed-function">typed functions</a>:</p>
<div class="captioned-table" id="table-4">
<table class="custom-pre-table docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>attribute</p></th>
<th class="head"><p>typed function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>.vars</p></td>
<td><p>jinja_vars</p></td>
</tr>
<tr class="row-odd"><td><p>.inner_vars</p></td>
<td><p>jinja_inner_vars</p></td>
</tr>
<tr class="row-even"><td><p>.free_vars</p></td>
<td><p>jinja_free_vars</p></td>
</tr>
</tbody>
</table>
<p><a class="table-caption reference external" href="#table-4">table 4</a></p>
</div>
<p>Therefore, the same action could be taken <em>directly</em>, i.e, without initialization:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">comp</span><span class="w"> </span><span class="kn">import</span> <span class="n">jinja_vars</span><span class="p">,</span> <span class="n">jinja_inner_vars</span><span class="p">,</span> <span class="n">jinja_free_vars</span>
<span class="linenos">2</span><span class="kn">from</span><span class="w"> </span><span class="nn">some.where</span><span class="w"> </span><span class="kn">import</span> <span class="n">my_jinja_string</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="nb">print</span><span class="p">(</span><span class="n">jinja_vars</span><span class="p">(</span><span class="n">my_jinja_string</span><span class="p">))</span>        <span class="c1"># {&quot;inner&quot;: {&quot;w&quot;: &quot;something&quot;}, &quot;free&quot;: (&quot;x&quot;, &quot;y&quot;, z&quot;)}</span>
<span class="linenos">5</span><span class="nb">print</span><span class="p">(</span><span class="n">jinja_inner_vars</span><span class="p">(</span><span class="n">my_jinja_string</span><span class="p">))</span>  <span class="c1"># {&quot;w&quot;: &quot;something&quot;}</span>
<span class="linenos">6</span><span class="nb">print</span><span class="p">(</span><span class="n">jinja_free_vars</span><span class="p">(</span><span class="n">my_jinja_string</span><span class="p">))</span>   <span class="c1"># (&quot;x&quot;, &quot;y&quot;, &quot;z&quot;)</span>
</pre></div>
</div>
</section>
<section id="rendering">
<h1>Rendering<a class="headerlink" href="#rendering" title="Link to this heading"></a></h1>
<p>The main objective of using <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#jinja-strings">jinja strings</a> is to create “dynamic HTML”, where the dynamic aspects is provided precisely by the existence of {f:free jinja vars}, which are leaved to be fixed <em>a posteriori</em>. The process of transforming jinja strings into raw HTML is called <em>rendering</em>.</p>
<p>Notice that  the <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#inner-var">inner vars</a> of a <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#jinja-strings">jinja string</a> already comes equipped with a value, which is set in the moment of its definition. To be rendered we then need to set values to its <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#jinja-free-var">free jinja vars</a>. This is done by defining a <em>jinja context</em>, which is a dictionary whose keys are strings with the names of the <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#jinja-free-var">free jinja vars</a>, and the values are the values that will be set to them.</p>
<p>As example of <em>jinja context</em> for the <a class="reference internal" href="#jinja-string">above</a> jinja string would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">my_context</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">2</span>    <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">some_value</span><span class="p">,</span>
<span class="linenos">3</span>    <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">other_value</span><span class="p">,</span>
<span class="linenos">4</span>    <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="n">another_value</span>
<span class="linenos">5</span><span class="p">}</span>
</pre></div>
</div>
<p>One time defined the context, one renders a <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#jinja-strings">jinja string</a> by making use of the <code class="docutils literal notranslate"><span class="pre">.render</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">comp</span><span class="w"> </span><span class="kn">import</span> <span class="n">Jinja</span>
<span class="linenos">2</span><span class="kn">from</span><span class="w"> </span><span class="nn">some.where</span><span class="w"> </span><span class="kn">import</span> <span class="n">my_jinja_string</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="n">Jinja</span><span class="p">(</span><span class="n">my_jinja_string</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">my_context</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, without initialization, through the <a class="autolink autolink-libs reference external" href="/libs/typed/glossary#typed-function">typed function</a> <code class="docutils literal notranslate"><span class="pre">render</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">comp</span><span class="w"> </span><span class="kn">import</span> <span class="n">render</span>
<span class="linenos">2</span><span class="kn">from</span><span class="w"> </span><span class="nn">some.where</span><span class="w"> </span><span class="kn">import</span> <span class="n">my_jinja_string</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="n">render</span><span class="p">(</span><span class="n">my_jinja_string</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="factories">
<h1>Factories<a class="headerlink" href="#factories" title="Link to this heading"></a></h1>
<p>Inside <a class="autolink autolink-libs reference external" href="/libs/comp">comp</a> we find some <em>jinja factories</em>. These are <a class="autolink autolink-libs reference external" href="/libs/typed/glossary#type-factory">type factories</a> constructing subtypes of <code class="docutils literal notranslate"><span class="pre">Jinja</span></code>. In other words, are <a class="autolink autolink-libs reference external" href="/libs/typed/glossary#typed-function">typed functions</a> taking values into <code class="docutils literal notranslate"><span class="pre">SUB(Jinja)</span></code>, the <a class="autolink autolink-libs reference external" href="/libs/typed/glossary#type">type</a> of subtypes of <code class="docutils literal notranslate"><span class="pre">Jinja</span></code>.</p>
</section>
<section id="highlight">
<h1>Highlight<a class="headerlink" href="#highlight" title="Link to this heading"></a></h1>
<p>To conclude, let us talk briefly on how to improve syntax highlight while working with <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#jinja-strings">jinja strings</a>. We have two points to consider:</p>
<ol class="arabic simple">
<li><p>jinja strings are used inside files with Python filetype;</p></li>
<li><p>jinja strings use delimiters differing from the standard <a class="autolink autolink-global reference external" href="https://jinja.palletsprojects.com/en/stable/">jinja</a> delimiters.</p></li>
</ol>
<p>From the first point, to get a nice highlighting one needs to mix both Python and Jinja highlights. This can be done by means of creating a custom filetype or by maintaining the Python filetype and using some regex filtering that includes Jinja highlight inside Python highlighting precisely for <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#jinja-strings">jinja strings</a>.</p>
<p>Since in <a class="autolink autolink-libs reference external" href="/libs/comp">comp</a> the only non-pythonic feature we will need is highlighting, the second option is highly preferable. Indeed, notice that <a class="autolink autolink-libs reference external" href="/libs/comp/glossary#jinja-strings">jinja strings</a> are defined as:</p>
<ol class="arabic simple">
<li><p>Python <a class="autolink autolink-python reference external" href="https://docs.python.org/3/reference/datamodel.html#immutable-sequences">strings</a></p></li>
<li><p>prefixed with <code class="docutils literal notranslate"><span class="pre">jinja</span></code></p></li>
<li><p>that contains <a class="autolink autolink-global reference external" href="https://jinja.palletsprojects.com/en/stable/">jinja</a> syntax.</p></li>
</ol>
<p>The fact that they are prefixed with a special keyword was introduced precisely to allow an easy parsing of the region that will be highlighted with Jinja syntax. Indeed: it is the region in  between a <code class="docutils literal notranslate"><span class="pre">&quot;&quot;&quot;jinja</span></code> and a triple quotes <code class="docutils literal notranslate"><span class="pre">&quot;&quot;&quot;</span></code>.</p>
<p>There are multiple solutions to embed syntax of a language inside the syntax of other language by giving certain delimiters. Such solutions depend on the development environment. For <code class="docutils literal notranslate"><span class="pre">vim</span></code> you can use <a class="reference external" href="https://github.com/inkarkat/vim-SyntaxRange">vim-SyntaxRange</a>. For <code class="docutils literal notranslate"><span class="pre">neovim</span></code>, try <a class="reference external" href="https://github.com/nvim-treesitter/nvim-treesitter">nvim-treesitter</a>.</p>
<p>In the case of <code class="docutils literal notranslate"><span class="pre">vim</span></code> with <code class="docutils literal notranslate"><span class="pre">SyntaxRange</span></code>, to embed Jinja highlight with the given delimiters you can just add the following line to your <code class="docutils literal notranslate"><span class="pre">.vimrc</span></code>:</p>
<div class="highlight-vim notranslate"><div class="highlight"><pre><span></span>autocmd <span class="nb">BufWinEnter</span><span class="p">,</span><span class="nb">FileType</span> python <span class="k">call</span> SyntaxRange#Include<span class="p">(</span><span class="s1">&#39;f&quot;&quot;&quot;jinja&#39;</span><span class="p">,</span> <span class="s1">&#39;&quot;&quot;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;jinja&#39;</span><span class="p">,</span> <span class="s1">&#39;NonText&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Concerning the second point above, before embedding Jinja syntax inside Python syntax, one first need to modify the Jinja syntax to highlight the correct delimiters. For <code class="docutils literal notranslate"><span class="pre">vim</span></code> users, you can use <a class="reference external" href="https://github.com/Glench/Vim-Jinja2-Syntax">Vim-Jinja2-Syntax</a> with minor modifications.</p>
</section>
<section id="other-docs">
<h1>Other Docs<a class="headerlink" href="#other-docs" title="Link to this heading"></a></h1>
<ol class="arabic simple">
<li><p><a class="reference internal" href="overview.html">overview</a></p></li>
<li><p><a class="reference internal" href="components.html">components</a></p></li>
<li><p><a class="reference internal" href="models.html">models</a></p></li>
<li><p><a class="reference internal" href="rendering.html">rendering</a></p></li>
<li><p><a class="reference internal" href="statics.html">statics</a></p></li>
<li><p><a class="reference internal" href="compatibility.html">compatibility</a></p></li>
<li><p><a class="reference internal" href="entities.html">list of entities</a></p></li>
<li><p><a class="reference internal" href="glossary.html">glossary</a></p></li>
<li><p><a class="reference internal" href="changelog.html">changelog</a></p></li>
</ol>
</section>
</main>
            </div>
        </div>
        <footer class="footer">
            <p class="footer-text">
                Yuri Ximenes, 2025. Last update: <purple>2025/09/03 at 13:31</purple>.<br>
                Made using <a href="https://www.sphinx-doc.org/en/master/">sphinx</a>.
            </p>
        </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (window.matchMedia("(max-width: 768px)").matches) {
                document.querySelectorAll('.sidebar-collapsible > details[open]').forEach(function(details){
                    details.removeAttribute('open');
                });
            }
        });
    </script>
    </body>  
</html>