<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>yx - libs/comp/rendering</title>
        <link rel="stylesheet" href="/_static/index.css">
        <link rel="stylesheet" href="/_static/pygments.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css" integrity="sha384-5TcZemv2l/9On385z///+d7MSYlvIEw9FuZTIdZ14vJLqWphw7e7ZPuOiCHJcFCP" crossorigin="anonymous">
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js" integrity="sha384-cMkvdD8LoxVzGF/RPUKAcvmm49FQ0oxwDF3BGKtDXcEc+T1b2N+teh/OJfpU0jr6" crossorigin="anonymous"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js" integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh" crossorigin="anonymous"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                renderMathInElement(document.body, {
                  delimiters: [
                      {left: ':::tex', right: ':::', display: true},
                      {left: ':tex', right: ':', display: false},
                  ],
                  throwOnError : false
                });
            });
        </script>
    </head>     
    <body>
        <header class="header">
            <div class="menu-div">
                
                    <a href="/" class="menu-item">home</a>
                
                    <a href="/about" class="menu-item">about</a>
                
                    <a href="/education" class="menu-item">education</a>
                
                    <a href="/research" class="menu-item">research</a>
                
                    <a href="/publications" class="menu-item">publications</a>
                
                    <a href="/work" class="menu-item">work</a>
                
                    <a href="/setup" class="menu-item">setup</a>
                
                    <a href="/libs" class="menu-item ">libs</a>
                
                    <a href="/notes" class="menu-item ">notes</a>
                
            </div>    
        </header>
        <div class="content">
            
            
            <div class="sidebar">
                <span class="sidebar-title">libs menu</span>
                <ul class="sidebar-ul">
                    
                        
    
    

    
        <li class="sidebar-collapsible">
            <details open>
                <summary>
                  <span></span>
                  
                      <a href="/libs/typed">typed</a>
                  
                </summary>
                <ul class="sidebar-ul-inner-1">
                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/overview">overview</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/types">types</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/models">models</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/errors">errors</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/examples">examples</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/entities">lists of entities</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/typed/glossary">glossary</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">└─</span>
            
                <a href="/libs/typed/changelog">changelog</a>
            
            
        </li>
    

                    
                </ul>
            </details>
        </li>
    

                    
                        
    
    

    
        <li class="sidebar-collapsible">
            <details open>
                <summary>
                  <span></span>
                  
                      <a href="/libs/comp">comp</a>
                  
                </summary>
                <ul class="sidebar-ul-inner-1">
                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/overview">overview</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/components">components</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/jinja">jinja</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/models">models</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/rendering">rendering</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/statics">statics</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/compatibility">compatibility</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/entities">list of entities</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">├─</span>
            
                <a href="/libs/comp/glossary">glossary</a>
            
            
        </li>
    

                    
                        
    
    
        
            
        
    

    
        <li class="sidebar-li">
            <span class="sidebar-prefix-1">└─</span>
            
                <a href="/libs/comp/changelog">changelog</a>
            
            
        </li>
    

                    
                </ul>
            </details>
        </li>
    

                    
                        
    
    

    
        <li class="sidebar-li-0">
            <span></span>
              
                  <a href="/libs/cli">cli</a>
               
        </li>
    

                    
                        
    
    

    
        <li class="sidebar-li-0">
            <span></span>
              
                  <a href="/libs/utils">utils</a>
               
        </li>
    

                    
                </ul>
            </div>
            
            
            <div class="main">
                
                    


<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
    
    
        
            
            <li class="breadcrumb-item">
                <a href="/libs">libs</a>
            </li>
        
    
        
            
            <li class="breadcrumb-item">
                <span class="breadcrumb-separator">/</span><a href="/libs/comp">comp</a>
            </li>
        
    
        
            <li class="breadcrumb-item active" aria-current="page">
                <span class="breadcrumb-separator">/</span><a href="/libs/comp/rendering">rendering</a>
            </li>
        
    
    </ol>
</nav>

                
                
                <main><section id="about">
<h1>About<a class="headerlink" href="#about" title="Link to this heading"></a></h1>
<p>In this documentation we will discuss the <em>rendering process</em> in the <code class="docutils literal notranslate"><span class="pre">comp</span></code> component system.</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#review">Review</a></p></li>
<li><p><a class="reference internal" href="#rendering">Rendering</a></p></li>
<li><p><a class="reference internal" href="#context">Context</a></p></li>
<li><p><a class="reference internal" href="#minify">Minify</a></p></li>
<li><p><a class="reference internal" href="#scripts">Scripts</a></p></li>
<li><p><a class="reference internal" href="#assets">Assets</a></p></li>
<li><p><a class="reference internal" href="#extensions">Extensions</a></p></li>
<li><p><a class="reference internal" href="#style">Style</a></p></li>
</ol>
</section>
<section id="review">
<h1>Review<a class="headerlink" href="#review" title="Link to this heading"></a></h1>
<p>Recall that the <code class="docutils literal notranslate"><span class="pre">comp</span></code> component system is composed by <em>components</em> which are entities of type <code class="docutils literal notranslate"><span class="pre">COMPONENT</span></code>. They are functions decorated with <code class="docutils literal notranslate"><span class="pre">&#64;component</span></code> that receive arguments and return <em>jinja strings</em>, i.e, instances of <code class="docutils literal notranslate"><span class="pre">Jinja</span></code>. A component may have special variables, as <code class="docutils literal notranslate"><span class="pre">__depends_on__</span></code>.</p>
</section>
<section id="rendering">
<h1>Rendering<a class="headerlink" href="#rendering" title="Link to this heading"></a></h1>
<p>After constructed, components can be <em>rendered</em>: the process of evaluating the component in a <em>context</em>, producing raw HTML. Technically, the render is implemented as a typed function (in the sense of {typed}) <code class="docutils literal notranslate"><span class="pre">render:</span> <span class="pre">Component</span> <span class="pre">x</span> <span class="pre">Context</span> <span class="pre">-&gt;</span> <span class="pre">HTML</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">comp</span><span class="w"> </span><span class="kn">import</span> <span class="n">render</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="n">html</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="n">my_comp</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">context</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="context">
<h1>Context<a class="headerlink" href="#context" title="Link to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">Context</span></code> type is a representation of <code class="docutils literal notranslate"><span class="pre">Dict(Any)</span></code>, meaning that it is a dictionary with key and values. Typically, one pass this dictionary to the <code class="docutils literal notranslate"><span class="pre">render</span></code> function as <em>keyword arguments</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">comp</span><span class="w"> </span><span class="kn">import</span> <span class="n">render</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="n">html</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span>
<span class="linenos">4</span>    <span class="n">my_comp</span><span class="p">,</span>
<span class="linenos">5</span>    <span class="n">some_var</span><span class="o">=</span><span class="n">some_value</span><span class="p">,</span>
<span class="linenos">6</span>    <span class="n">other_var</span><span class="o">=</span><span class="n">other_value</span><span class="p">,</span>
<span class="linenos">7</span>    <span class="o">...</span>
<span class="linenos">8</span><span class="p">)</span>
</pre></div>
</div>
<p>In the rendering process, the context should contains at least the <em>jinja vars</em> in the returning <em>jinja string</em> of the component to be rendered. Some data, however, is automatically included in the context:</p>
<ol class="arabic simple">
<li><p>local variables</p></li>
<li><p>depending components in the <code class="docutils literal notranslate"><span class="pre">__depends_on__</span></code> variable.</p></li>
</ol>
<p>In practical terms, rendering a component is similarly to using <code class="docutils literal notranslate"><span class="pre">eval</span></code> operation complied to all variables of a component, followed by a <code class="docutils literal notranslate"><span class="pre">jinja</span></code> renderization. This means that if <code class="docutils literal notranslate"><span class="pre">some_var</span></code> is a variable of some component <code class="docutils literal notranslate"><span class="pre">my_comp</span></code>, then to render <code class="docutils literal notranslate"><span class="pre">my_comp</span></code> we need to pass <code class="docutils literal notranslate"><span class="pre">some_var</span></code> with some value:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">typed</span><span class="w"> </span><span class="kn">import</span> <span class="n">SomeType</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">comp</span><span class="w"> </span><span class="kn">import</span> <span class="n">component</span><span class="p">,</span> <span class="n">Jinja</span><span class="p">,</span> <span class="n">render</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="nd">@component</span>
<span class="linenos"> 5</span><span class="k">def</span><span class="w"> </span><span class="nf">my_comp</span><span class="p">(</span><span class="n">some_var</span><span class="p">:</span> <span class="n">SomeType</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Jinja</span><span class="p">:</span>
<span class="linenos"> 6</span>    <span class="o">...</span>
<span class="linenos"> 7</span>    <span class="k">return</span> <span class="s2">&quot;&quot;&quot;jinja</span>
<span class="linenos"> 8</span><span class="s2">    ....</span>
<span class="linenos"> 9</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="n">html</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="n">my_comp</span><span class="p">,</span> <span class="n">some_var</span><span class="o">=</span><span class="n">some_value</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><p>We note that, if in the definition of <code class="docutils literal notranslate"><span class="pre">my_comp</span></code> the variable <code class="docutils literal notranslate"><span class="pre">some_var</span></code> has a default value, it is used in <code class="docutils literal notranslate"><span class="pre">render</span></code> if the variable is omitted.</p>
</div></blockquote>
</section>
<section id="minify">
<h1>Minify<a class="headerlink" href="#minify" title="Link to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">render</span></code> function has certain special variables, as we pass to discuss. The first of those variables in <code class="docutils literal notranslate"><span class="pre">__minify__</span></code>. It is a boolean variable with default value to <code class="docutils literal notranslate"><span class="pre">False</span></code>. If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the obtained HTML is returned compacted.</p>
<p>So, if you want to produce compacted HTML, just use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span><span class="w"> </span><span class="nn">comp</span><span class="w"> </span><span class="kn">import</span> <span class="n">render</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="n">html</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="n">my_comp</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">context_vars</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">__minify__</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="scripts">
<h1>Scripts<a class="headerlink" href="#scripts" title="Link to this heading"></a></h1>
<p>In the sequence, we have the variable <code class="docutils literal notranslate"><span class="pre">__scripts__</span></code> of type <code class="docutils literal notranslate"><span class="pre">List(Script)</span></code>. It should be used to compend a component with certain auxiliary scripts. The <code class="docutils literal notranslate"><span class="pre">Script</span></code> model has a mandatory attribute <code class="docutils literal notranslate"><span class="pre">script_src</span></code> which defines its origin.</p>
<p>The attribute <code class="docutils literal notranslate"><span class="pre">script_src</span></code> is of type <code class="docutils literal notranslate"><span class="pre">Union(Extension('js'),</span> <span class="pre">Url('http',</span> <span class="pre">'https')</span></code>, which means that it accepts both:</p>
<ol class="arabic simple">
<li><p>a <code class="docutils literal notranslate"><span class="pre">http</span></code> or <code class="docutils literal notranslate"><span class="pre">https</span></code> url</p></li>
<li><p>a path to some <code class="docutils literal notranslate"><span class="pre">.js</span></code> file.</p></li>
</ol>
<p>If in <code class="docutils literal notranslate"><span class="pre">__script__</span></code> it is passed a script object with <code class="docutils literal notranslate"><span class="pre">script_src</span></code> given by a url, then, during the rendering, the component is compended with the builtin <code class="docutils literal notranslate"><span class="pre">script</span></code> component complied the given script object. On the other hand, if the script object contains a <code class="docutils literal notranslate"><span class="pre">script_src</span></code> which is the path to a <code class="docutils literal notranslate"><span class="pre">.js</span></code> file, then the content of the file is added to the component inside a <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> block.</p>
<p>So, for example, suppose you need to incorporate a script located in the url <code class="docutils literal notranslate"><span class="pre">https://my_script_url.com</span></code> to a component <code class="docutils literal notranslate"><span class="pre">my_comp</span></code>. All you need to do is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">comp</span><span class="w"> </span><span class="kn">import</span> <span class="n">render</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">comp.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Script</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="n">my_script</span> <span class="o">=</span> <span class="n">Script</span><span class="p">(</span>
<span class="linenos"> 5</span>    <span class="n">script_src</span><span class="o">=</span><span class="s2">&quot;https://my_script_url.com&quot;</span><span class="p">,</span>
<span class="linenos"> 6</span>    <span class="n">script_defer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos"> 7</span>    <span class="o">...</span>
<span class="linenos"> 8</span><span class="p">)</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="n">html</span> <span class="o">=</span> <span class="n">render</span><span class="p">(</span><span class="n">my_comp</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">context_vars</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">__scripts__</span><span class="o">=</span><span class="p">[</span><span class="n">my_script</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="assets">
<h1>Assets<a class="headerlink" href="#assets" title="Link to this heading"></a></h1>
</section>
<section id="extensions">
<h1>Extensions<a class="headerlink" href="#extensions" title="Link to this heading"></a></h1>
</section>
<section id="style">
<h1>Style<a class="headerlink" href="#style" title="Link to this heading"></a></h1>
</section>
</main>
            </div>
        </div>
        <footer class="footer">
            <p class="footer-text">
                Yuri Ximenes, 2025. Last update: <purple>2025/08/21 at 20:20</purple>.<br>
                Made using <a href="https://www.sphinx-doc.org/en/master/">sphinx</a>.
            </p>
        </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (window.matchMedia("(max-width: 768px)").matches) {
                document.querySelectorAll('.sidebar-collapsible > details[open]').forEach(function(details){
                    details.removeAttribute('open');
                });
            }
        });
    </script>
    </body>  
</html>